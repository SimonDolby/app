/*Copyright (c) 2011-2017 Moat Inc. All Rights Reserved.*/
var moatjw=moatjw||function(){function p(a){var d=n(a);if(d){if(d=d.player)for(var b in q)q.hasOwnProperty(b)&&d.off(b,B);a&&(l[a]=null,delete l[a])}}function v(a,d,b){(a=n(a))&&a.moatApi.dispatchEvent({type:d,adVolume:b})}function m(a){return"number"===typeof a&&!isNaN(a)}function n(a){if(a)return l&&l[a]}function r(a,d,b,g){if(a&&d&&b&&m(g)){var f=["first","mid","third"],e=[],c,h,k;h=0;for(k=f.length;h<k&&(c=f[h],c=a[c],c.sent||e.push(c),b!==c.event);h++);h=0;for(k=e.length;h<k;h++)c=e[h],c.sent=
!0,v(d,c.event,g)}}function w(a){return a?(a=n(a))&&a.quartiles:!1}function B(a){var d=a.type,b=q[d],g;if(!(g=a.id))a:{for(var f in l)if(l.hasOwnProperty(f)&&(g=l[f])&&g.player===this){g=f;break a}g=void 0}f=g;var e,c;if("adTime"===d)a:{c=w(f),b=a.duration,a=a.position,m(b)&&m(a)&&0!==b&&0!==a?(a=a/b*100,(b=n(f))&&!b.checkedAdTime&&(b.checkedAdTime=!0,100===a&&(a=0))):a=0,b=c;if(f&&m(a)&&b&&b)for(e in b)if(b.hasOwnProperty(e)){d=b[e];g=a;var h=d;if(m(g)&&h&&!h.sent&&g>=h.min&&g<=h.max){b=d.event;
break a}}b=void 0}b&&(e=C(this),"AdVideoComplete"===b&&(c=w(f),r(c,f,b,e)),"AdVideoFirstQuartile"===b||"AdVideoMidpoint"===b||"AdVideoThirdQuartile"===b?r(c,f,b,e):v(f,b,e),"AdVideoComplete"!==b&&"AdSkipped"!==b&&"AdStopped"!==b||p(f))}function x(a,d){return"GDFP"===a||"googima"===d}function C(a){if(a){if(a.getMute())return 0;a=a.getVolume();if(m(a))return 1<a?a/100:a}}function E(a){var d=a.container,b=a.adIds,g=a.duration,f=a.partnerCode,e=a.url;a=document.createElement("script");var c=[],h="_moatApi"+
Math.floor(1E5*Math.random()),k,l,b={adData:{ids:b,duration:g,url:e},dispatchEvent:function(a){this.sendEvent?(c&&(c.push(a),a=c,c=!1),this.sendEvent(a)):c&&c.push(a)}};try{k=d.ownerDocument,l=k.defaultView||k.parentWindow}catch(F){k=document,l=window}l[h]=b;a.type="text/javascript";d&&d.insertBefore(a,d.childNodes[0]||null);a.src="https://z.moatads.com/"+f+"/moatvideo.js#"+h;return b}function y(a){a&&(v(a,"AdStopped",0),p(a))}var q={adComplete:"AdVideoComplete",adSkipped:"AdSkipped",adError:"AdError",
adStarted:"AdStarted",adImpression:"AdImpression",adPlay:"AdPlaying",adPause:"AdPaused",volume:"AdVolumeChange",mute:"AdVolumeChange",adTime:null,remove:"AdStopped"},l={};return{add:function(a){if(!a)return!1;var d=a.player,b=a.adImpressionEvent;if(!a.partnerCode||!d||!b)return!1;a:{for(var b=["getContainer","off","on","getMute","getVolume"],g=0,f=b.length;g<f;g++)if("function"!==typeof d[b[g]]){b=!1;break a}b=!0}if(!b)return!1;var e;a:if(a){var b=a.partnerCode,g=a.player,c=a.adImpressionEvent,f=
c.adsystem,h=c.client,k;k=x(f,h)?(k=c.ima)&&k.ad&&k.ad.g:c;var m;try{var n;if(!(n=a.ids)){var t=k,p={};x(f,h)&&(p=t?ids={level1:"-",level2:"-",level3:t.adId||null,level4:t.creativeId||null}:!1);n=p}e=a.container||g.getContainer();var z;if(!(z=a.duration)){var t=k,r;x(f,h)&&(r=t.duration);z=r}var u=c&&c.id;if(!u||l.hasOwnProperty(u)){do u=Math.floor(1E5*Math.random()).toString();while(l.hasOwnProperty(u))}var w=c.tag,A;(A=a.url)||(a=k,x(f,h),A=a.mediafile&&a.mediafile.file);m={adSystem:f,client:h,
adIds:n,container:e,duration:z,id:u,partnerCode:b,player:g,tag:w,url:A,checkedAdTime:!1,quartiles:{first:{event:"AdVideoFirstQuartile",sent:!1,min:25,max:50},mid:{event:"AdVideoMidpoint",sent:!1,min:50,max:75},third:{event:"AdVideoThirdQuartile",sent:!1,min:75,max:100}}}}catch(y){e=!1;break a}e=m}else e=!1;if(!e)return!1;m=e.id;l[m]=e;if(e&&d){if(d)for(var D in q)if(q.hasOwnProperty(D))d.on(D,B);e.moatApi=E(e);e.moatApi&&v(e.id,"AdImpression",C(d))}return m},remove:y,removeAll:function(){for(var a in l)l.hasOwnProperty(a)&&
y(a)}}}();